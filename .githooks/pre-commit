#!/bin/bash
# pre-commit hook: prevent committing any Markdown (.md) files
# Place in .git/hooks/pre-commit and make executable

echo "=============================================================="
echo "PRE-COMMIT CHECK: Blocking .md files"
echo "--------------------------------------------------------------"

# Get staged .md files
STAGED_MD=$(git diff --cached --name-only | grep -E '\.md$')

if [ -n "$STAGED_MD" ]; then
    echo "ERROR: Committing Markdown (.md) files is not allowed:"
    echo "$STAGED_MD" | sed 's/^/    /'
    echo "Commit aborted."
    echo "=============================================================="
    exit 1
fi

# Check if .gitignore is staged
STAGED_GITIGNORE=$(git diff --cached --name-only | grep -E '^\.gitignore$')

if [ -n "$STAGED_GITIGNORE" ]; then
    echo "ERROR: Commiting staged .gitignore is not allowed:"
    echo "    $STAGED_GITIGNORE"
    echo "Commit aborted."
    echo "=============================================================="
    exit 1
fi

echo "No .md files staged. Commit allowed."
echo "=============================================================="
exit 0
